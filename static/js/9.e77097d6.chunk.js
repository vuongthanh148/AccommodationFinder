(this.webpackJsonpaccommodationfinder=this.webpackJsonpaccommodationfinder||[]).push([[9],{385:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a="http://localhost:4000",c="https://accommodation-finder.herokuapp.com"},551:function(e,t,n){},763:function(e,t,n){"use strict";n.r(t);var a=n(11),c=n.n(a),r=n(19),o=n(24),i=n(1),s=n.n(i),l=n(10),d=n.n(l),u=n(761),j=n(739),h=n(764),m=n(765),p=n(756),b=n(759),O=n(758),x=n(397),f=n(17),g=n(113),v=n(385),y=n(35),w=n(435),S=n.n(w),k=n(0),T=function(e){var t=e.comment,n=t.content,a=t.userInfo,c=t.createdAt;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(h.a,{children:[Object(k.jsx)(m.a,{span:1,children:Object(k.jsx)(O.a,{size:"large",src:a.avatar})}),Object(k.jsx)(m.a,{span:23,children:Object(k.jsx)(h.a,{align:"middle",style:{height:"85%"},children:Object(k.jsx)(m.a,{children:Object(k.jsxs)(h.a,{align:"bottom",children:[Object(k.jsx)(p.a,{className:"username",children:a.name}),Object(k.jsx)(p.a,{className:"time-create-comment",style:{marginLeft:"0.5rem"},children:new Date(String(c)).toUTCString()})]})})})}),Object(k.jsx)(h.a,{justify:"end",style:{width:"100%"},children:Object(k.jsx)(m.a,{span:23,children:n})})]}),Object(k.jsx)(j.a,{})]})},C=n(59),I=n(26),N=function(e){var t=e.icon,n=e.content,a=e.title;return Object(k.jsxs)("div",{className:"home-details-address",children:[Object(k.jsx)(I.a,{style:{color:"#bf7c2f"},icon:t}),Object(k.jsxs)("p",{style:{paddingRight:"5px",paddingLeft:"7px",textAlign:"left",margin:"0",fontWeight:"600",fontSize:"1rem"},children:[a,":"]}),Object(k.jsx)("p",{style:{textAlign:"left",width:"66%",margin:0,fontSize:"1rem"},children:n})]})},z=s.a.memo(N),P=(n(99),n(88)),D=(n(551),u.a.TextArea);t.default=function(){var e=Object(f.h)(),t=Object(i.useState)(),n=Object(o.a)(t,2),a=n[0],s=n[1],l=Object(i.useState)([]),u=Object(o.a)(l,2),w=u[0],I=u[1],N=Object(i.useState)({}),A=Object(o.a)(N,2),F=A[0],M=A[1],B=Object(i.useState)({}),E=Object(o.a)(B,2),L=E[0],Y=E[1],G=Object(i.useState)(null),R=Object(o.a)(G,2),J=R[0],U=R[1],_=(Object(f.g)(),Object(i.useContext)(y.a)),H=_.userData,W=H.avatar,q=H.name,K=H.userType;H.userId;Object(i.useEffect)((function(){V(),X(),Z(),_.userData.userType&&ae()}),[]);var Q=Object(i.useCallback)((function(e){s(e.target.value)}),[]),V=function(){var t=Object(r.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d()({method:"GET",url:"".concat(v.b,"/accommodation/").concat(e.id),headers:{"Content-Type":"application/json"}});case 2:n=t.sent,console.log(n.data),M(n.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=Object(r.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d()({method:"POST",url:"".concat(v.a,"/comment/get-all-comments"),headers:{"Content-Type":"application/json"},data:{accommodationId:e.id}});case 2:n=t.sent,I(n.data.comments);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(){var t=Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d()({method:"POST",url:"".concat(v.a,"/accommodation/analyst"),headers:{"Content-Type":"application/json"},data:{accommodationId:e.id}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=Object(i.useCallback)(Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"POST",url:"".concat(v.a,"/comment/create-new-comment"),headers:{"Context-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{content:a,accommodationId:e.id}});case 3:return t.next=5,X();case 5:s(""),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),[a]),ee=function(t){console.log(_.userData),U(t),d()({method:"POST",url:"".concat(v.a,"/rating"),headers:{"Context-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{ratedStar:t,accommodationId:e.id,userId:_.userData._id}})},te=function(){var t=Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"POST",url:"".concat(v.a,"/accommodation/follow"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{accommodationId:e.id}});case 3:ae(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),ne=function(){var t=Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"POST",url:"".concat(v.a,"/accommodation/unfollow"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{accommodationId:e.id}});case 3:ae(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),ae=function(){var t=Object(r.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"GET",url:"".concat(v.a,"/accommodations/").concat(e.id,"/info"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:n=t.sent,Y(n.data.result),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),ce=function(){L.isFollowed?ne():te()},re=Object(i.useMemo)((function(){var e=F.photos,t=(F.accommodationType,F.avgRate),n=F.city,a=F.district,c=F.livingArea,r=F.materialFacilities,o=F.ownerName,i=F.ownerPhone,s=F.price,l=F.publicPlace,d=F.street,u=F.postedDate,O=F.houseNumber,x=F.title,f=F.ward,g=_.userData.userType;e=e||[],t=t||"",n=n||"",a=a||"",c=c="",r=r||[],o=o||"",i=i||"",s=s||"",l=l||"",u=u||"",O=O||"",x=x||"",f=f||"";var v=[{title:"\u0110\u1ecba ch\u1ec9",content:(d=d||"")?"".concat(O," ").concat(d,", ").concat(f,", ").concat(a,", ").concat(n):"",icon:C.f},{title:"\u1ede g\u1ea7n",content:l,icon:C.h},{title:"Di\u1ec7n t\xedch",content:"".concat(c," m\xb2"),icon:C.e},{title:"Ch\u1ee7 nh\xe0",content:"".concat(o),icon:C.i},{title:"Li\xean h\u1ec7",content:"".concat(i),icon:C.g},{title:"Gi\xe1",content:"".concat(Number(s).toLocaleString("en")),icon:C.b}];return Object(k.jsxs)("div",{className:"details-section",children:[Object(k.jsx)(j.a,{orientation:"left",children:"Details"}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(m.a,{span:14,children:Object(k.jsx)("div",{style:{width:"90%",height:"400px"},children:Object(k.jsx)(P.Slide,{autoplay:!0,duration:2e3,pauseOnHover:!0,transitionDuration:750,canSwipe:!0,children:e.map((function(e,t){return Object(k.jsx)("div",{style:{backgroundImage:"url(".concat(e,")"),width:"100%",height:"400px",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"50% 50%",overflow:"hidden"}},t)}))})})}),Object(k.jsxs)(m.a,{span:10,children:[Object(k.jsxs)(h.a,{align:"middle",children:[Object(k.jsx)("div",{className:"house-details-title",children:x}),"renter"===g&&Object(k.jsx)("div",{className:"follow-btn ".concat(L.isFollowed?"follow":"unfollow"),onClick:ce,children:L.isFollowed?"Unfollow":"Follow"})]}),Object(k.jsx)(h.a,{children:Object(k.jsx)(p.a.Paragraph,{children:"Ng\xe0y \u0111\u0103ng b\xe0i: ".concat(S()(u).format("hh:mm MMMM Do YYYY")," ")})}),Object(k.jsxs)(h.a,{style:{padding:"0.5rem 0"},align:"middle",children:[Object(k.jsx)(p.a.Paragraph,{strong:!0,style:{fontSize:"1rem"},children:"\u0110\xe1nh gi\xe1 chung:"}),Object(k.jsx)(b.a,{value:t,disabled:!0})]}),Object(k.jsx)(h.a,{align:"middle",style:{paddingBottom:"0.5rem"},children:"renter"===g&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(p.a.Paragraph,{strong:!0,style:{fontSize:"1rem"},children:"\u0110\xe1nh gi\xe1 c\u1ee7a b\u1ea1n:"}),Object(k.jsx)(b.a,{value:J||L.rate,onChange:ee})]})}),Object(k.jsx)(h.a,{style:{marginTop:"1rem"},children:v.map((function(e,t){var n=e.title,a=e.icon,c=e.content;return Object(k.jsx)(z,{title:n,icon:a,content:c},t)}))})]})]})]})}),[J,L,F]),oe=Object(i.useMemo)((function(){return Object(k.jsx)(k.Fragment,{children:"renter"===K&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(h.a,{children:[Object(k.jsx)(m.a,{span:1,children:Object(k.jsx)(O.a,{size:"large",src:W})}),Object(k.jsx)(m.a,{span:23,children:Object(k.jsx)(h.a,{align:"middle",style:{height:"85%"},children:Object(k.jsx)(m.a,{children:Object(k.jsx)(p.a,{children:q})})})})]}),Object(k.jsx)(h.a,{justify:"end",children:Object(k.jsxs)(m.a,{span:23,children:[Object(k.jsx)(D,{value:a,onChange:Q}),Object(k.jsx)(h.a,{justify:"end",children:Object(k.jsx)(x.a,{className:"button-upload-comment",onClick:$,children:"Comment"})})]})}),Object(k.jsx)(j.a,{}),Object(k.jsx)(k.Fragment,{children:w.map((function(e,t){return Object(k.jsx)(T,{comment:e},e._id)}))})]})})}),[K,w]);return Object(k.jsxs)("div",{className:"house-detail-page",children:[Object(k.jsx)(h.a,{align:"middle",justify:"center",children:Object(k.jsxs)(m.a,{span:20,children:[re,Object(k.jsx)(j.a,{orientation:"left",children:"COMMENTS"}),oe]})}),Object(k.jsx)(g.a,{})]})}}}]);
//# sourceMappingURL=9.e77097d6.chunk.js.map